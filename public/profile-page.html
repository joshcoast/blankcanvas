<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
	<link rel="stylesheet" href="assets/css/style.css">

	<!-- Compiled and minified JavaScript -->
	<!--Import materialize.css-->

	<title>Document</title>

</head>

<body>

	<nav class="nav-extended">
		<div class="nav-wrapper">
			<a href="#!" class="brand-logo center logoText ">Blank Canvas</a>
			<a href="#" data-activates="mobile-demo" class="button-collapse">
				<i class="material-icons">menu</i>
			</a>
			<ul class="left hide-on-med-and-down" id="nav-mobile">
				<li class="active">
					<a href="#">Profile</a>
				</li>
				<li>
					<a href="#">Map</a>
				</li>
				<li>
					<a href="#">Settings</a>
				</li>
			</ul>
		</div>
	</nav>

	<div class="row">

		<div class="col s12 m12 l10 offset-l1">

			<div class="row">

				<div class="col s12 m8 l9">
					<!-- Note that "m8 l9" was added -->

					<div class="card-panel grey lighten-5 z-depth-1">
						<div class="row profileDiv">
							<div class="col m4 s12  ">
								<img id="profilePicture" src="assets/images/placeholder-profile.jpg" alt="" class="ProfileImg circle ">
							</div>
							<div class="col m8 s12 ">
								<h4 id="idName">Name Last Name</h4>
								<h5 id="idTitle">Painter and Illustrator</h5>
								<p id="idLocation">Denver, Colorado</p>
								<h5 id="idUrl">www.website.com</h5>
							</div>
							<a class="btn-floating right btn-medium red EditElement">
								<i class="large material-icons">mode_edit</i>
							</a>
							<!-- <progress value="0" max="100" id="uploader">0%</progress> -->
							<input type="file" value="upload" id="fileButton" />
						</div>
					</div>

					<ul class="collapsible" data-collapsible="accordion">
						<li>
							<div class="collapsible-header profileDiv">
								<i class="material-icons">filter_drama</i>
								Work Samples
							</div>
							<div class="collapsible-body">
								<div class="slider">
									<ul class="slides">
										<li>
											<img src="https://lorempixel.com/580/250/nature/1">
											<!-- random image -->
											<div class="caption center-align">
												<h3>This is our big Tagline!</h3>
												<h5 class="light grey-text text-lighten-3">Here's our small slogan.</h5>
											</div>
										</li>
										<li>
											<img src="https://lorempixel.com/580/250/nature/2">
											<!-- random image -->
											<div class="caption center-align">
												<h3>Left Aligned Caption</h3>
												<h5 class="light grey-text text-lighten-3">Here's our small slogan.</h5>
											</div>
										</li>
										<li>
											<img src="https://lorempixel.com/580/250/nature/3">
											<!-- random image -->
											<div class="caption center-align">
												<h3>Right Aligned Caption</h3>
												<h5 class="light grey-text text-lighten-3">Here's our small slogan.</h5>
											</div>
										</li>
										<li>
											<img src="https://lorempixel.com/580/250/nature/4">
											<!-- random image -->
											<div class="caption center-align">
												<h3>This is our big Tagline!</h3>
												<h5 class="light grey-text text-lighten-3">Here's our small slogan.</h5>
											</div>
										</li>
									</ul>
								</div>
							</div>
						</li>
					</ul>
				</div>

				<div class="col s12 m4 l3">
					<!-- Note that "m4 l3" was added -->

					<p>Find local resources:</p>
					<div id="ChipsInterest" class="chips chips-placeholder"></div>

				</div>
				<div id="map"></div>
			</div>

			<div class="row">
				<div class="col s12 m8 l9">
					<div class="card-tabs">
						<ul class="tabs tabs-fixed-width">
							<li class="tab">
								<a class="active" href="#test4">Upcoming</a>
							</li>
							<li class="tab">
								<a href="#test5">Saved</a>
							</li>
						</ul>
					</div>
					<div class="card-content lighten-4">
						<div id="test4">
							<ul class="collection" id="InterestDiv">

							</ul>
						</div>
						<div id="test5">
							<ul class="collection">
								<li class="collection-item avatar">
									<img src="" alt="" class="circle">
									<span class="title">Title</span>
									<p>First Line
										<br> Second Line
									</p>
									<a href="#!" class="secondary-content">
										<i class="material-icons">grade</i>
									</a>
								</li>
								<li class="collection-item avatar">
									<i class="material-icons circle">folder</i>
									<span class="title">Title</span>
									<p>First Line
										<br> Second Line
									</p>
									<a href="#!" class="secondary-content">
										<i class="material-icons">grade</i>
									</a>
								</li>
								<li class="collection-item avatar">
									<i class="material-icons circle green">insert_chart</i>
									<span class="title">Title</span>
									<p>First Line
										<br> Second Line
									</p>
									<a href="#!" class="secondary-content">
										<i class="material-icons">grade</i>
									</a>
								</li>
								<li class="collection-item avatar">
									<i class="material-icons circle red">play_arrow</i>
									<span class="title">Title</span>
									<p>First Line
										<br> Second Line
									</p>
									<a href="#!" class="secondary-content">
										<i class="material-icons">grade</i>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col s12 m4 l3">

				</div>
			</div>
		</div>
	</div>
	<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
	<script src="https://cdn.firebase.com/libs/firebaseui/2.6.3/firebaseui.js"></script>
	<script src="assets/javascript/logic.js"></script>
	<script src="https://apis.google.com/js/api.js"></script>
	<script>
		$(document).ready(function () {


			// Initialize Firebase
			// var config = {
			//     apiKey: "AIzaSyDY8i3rOXYDnUfBhIa014qUOz_J1rXE5_o",
			//     authDomain: "blank-canvas-sea-1521595169015.firebaseapp.com",
			//     databaseURL: "https://blank-canvas-sea-1521595169015.firebaseio.com",
			//     projectId: "blank-canvas-sea-1521595169015",
			//     storageBucket: "blank-canvas-sea-1521595169015.appspot.com",
			//     messagingSenderId: "683989688813"
			// };
			// firebase.initializeApp(config);
			// var database = firebase.database();



			var interestChips = [];
			// This function will Grab the information from the user sign up? Not sure if we will need it.
			function interestrenderChips() {

			}
			// slider and collapsible functions:
			$('.slider').slider();
			$('.collapsible').collapsible();
			$(".button-collapse").sideNav();
			// Chips:
			var interest = ""
			var chip = {
				tag: 'chip content',
				image: '', //optional
				id: 1, //optional
				Ckey: 'data-key'
			};
			// interest chips:
			$('#ChipsInterest').on('chip.add', function (e, chip) {
				e.preventDefault();

				interest = chip.tag;
				database.ref().push({ interest: interest });
				// Google Custom Search:
			});

			database.ref().on("child_added", function (childSnapshot) {
				interestChips.push(childSnapshot.val().interest);
				var chipInit = interestChips.map(x => ({ tag: x }));
				$('.chips').material_chip({
					data: chipInit
				});
				$('.chip').attr('data-key', childSnapshot.key);
				console.log(childSnapshot.key);

				var cx = '002690778075665955245:ytl48lknafo';
				var queryURL = "https://www.googleapis.com/customsearch/v1?key=" +
					"AIzaSyDhBFUxT1VXUOEMHmPtB7LiVuxQXwrH_9I&cx=" + cx + "&q=" + (childSnapshot.val().interest);

				$.ajax({
					url: queryURL,
					method: "GET"
				}).then(function (response) {
					console.log(response);
					var results = response.items;

					for (var i = 0; i < results.length; i++) {
						$("#InterestDiv").append(`<li class="collection-item avatar">
																				<img src="" alt="" class="circle">
																				<span class="title">${results[i].title}</span>
																				<p></p>
																				<a href="#!" class="secondary-content">  

																				<input type="checkbox" id="test" class="saveCheckbox" />
																				<label for="test">Save</label>
																				</a>
																				</li>`
						)
					};

				});
			});

			$('.chips').on('chip.delete', function (e, chip) {
				var ThisKey = (e, chip.Ckey)
				console.log(ThisKey)
				var ChipToDelete = (e, chip.tag);
				console.log(ChipToDelete)
				var Chipid = $('.chip').data('key');
				console.log(Chipid)
				database.ref('/' + Chipid).remove();
			});

			$('.chips').on('chip.select', function (e, chip) {
				// you have the selected chip here
			});

			$('.chips').material_chip();

			$('.chips-placeholder').material_chip({
				placeholder: 'Enter an interest',
				secondaryPlaceholder: '+ interest',
			});
		});
	</script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGZVPGsNTMJ_snjkzQhKzzMGOI_hJoXw8&amp;libraries=places&amp;callback=initMap"
 async defer>
</script>
<script>
	$.ajax({
		url: "https://geoip-db.com/jsonp",
		jsonpCallback: "callback",
		dataType: "jsonp",
		success: function (location) {
			var map;
			var infowindow;


			var pyrmont = { lat: location.latitude, lng: location.longitude };

			map = new google.maps.Map(document.getElementById('map'), {
				center: pyrmont,
				zoom: 18
			});

			infowindow = new google.maps.InfoWindow();
			var service = new google.maps.places.PlacesService(map);
			service.nearbySearch({
				location: pyrmont,
				radius: 25,
				type: ['art_gallery']
			}, callback);



			if (status === google.maps.places.PlacesServiceStatus.OK) {
				for (var i = 0; i < results.length; i++) {
					createMarker(results[i]);
				}
			}



			var placeLoc = place.geometry.location;
			var marker = new google.maps.Marker({
				map: map,
				position: place.geometry.location
			});

			google.maps.event.addListener(marker, 'click', function () {
				infowindow.setContent(place.name);
				infowindow.open(map, this);
			});
		}

	});


</script>
</body>

</html>